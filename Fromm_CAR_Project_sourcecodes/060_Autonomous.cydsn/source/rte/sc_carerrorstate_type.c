/*
 * Filename: sc_carerrorstate_type.c
 *
 * Author: Autogenerated by H-DA RTE Generator, (c) Prof. Fromm
 *
 * description: Error state as set by the central error state machine. Will control the safe state independently from the application.
 * name: sc_carErrorState
 * shortname: carErrorState
 *
 */

#include "project.h"
#include "global.h"
#include "rte.h"
#include "rte_types.h"
#include "sc_carerrorstate_type.h"



/* USER CODE START SC_CARERRORSTATE_INCLUDE */

/* USER CODE END SC_CARERRORSTATE_INCLUDE */




/* USER CODE START SC_CARERRORSTATE_USERDEFINITIONS */

/* USER CODE END SC_CARERRORSTATE_USERDEFINITIONS */


/*****************************************************************************************
 *************** Port Wrapper Implementation for SC_CARERRORSTATE signal  ****************
 *****************************************************************************************/
 
 
/**
 * Default OUT driver API
 */
inline RC_t SC_CARERRORSTATE_driverOut(const SC_CARERRORSTATE_data_t  *const data)
{
	/* USER CODE START driverOutSC_CARERRORSTATE */


    //Set error led
    switch (data->m_led)
    {
        case ERROR_LED_NONE: 
            LED_Red_Write(0);
            LED_Yellow_Write(0);
            break;
        case ERROR_LED_YELLOW: 
            LED_Red_Write(0);
            LED_Yellow_Write(1);
            break;
        case ERROR_LED_RED: 
            LED_Red_Write(1);
            LED_Yellow_Write(0);
            break;
        default: break;
    }
    
    //Activate Engine Power depending on max allowed Speed
    if (data->m_maxSpeed > 0)
    {
        ENGINE_OnOff_Write(1);
    }
    else
    {
        ENGINE_OnOff_Write(0);
    }
    
            
	return RC_SUCCESS;
	/* USER CODE END driverOutSC_CARERRORSTATE */
}



